#!/bin/bash

#eval "$(curl -k -s https://gitlab.com/uniqueops/ava/raw/master/var/global)"                                # Add Global Functions (Testing Purposes Only)

function Global_DomainCheck() { 
printf 'Domain: '
read -r Global_DomainCheck_Domain                                                                                                # Table Footer

Global_DomainCheck_Domain=$(echo "$Global_DomainCheck_Domain" | tr '[:upper:]' '[:lower:]')                 # Entry to Lowercase
Global_DomainCheck_Domain=$(echo "$Global_DomainCheck_Domain" | sed 's/[^a-z0-9.:-\/]//g')                  # Remove Special Characters
Global_DomainCheck_Domain=${Global_DomainCheck_Domain#*//};                                                 # Remove Protocol Prefix
Global_DomainCheck_Domain=${Global_DomainCheck_Domain#*www.};                                               # Remove WWW. Prefix
Global_DomainCheck_Domain=$(echo "$Global_DomainCheck_Domain" | cut -f1 -d"/")                              # Remove Domain Suffix

if [ -z "$Global_DomainCheck_Domain" ]; then                                                                # Empty Domain Check
  Global_DomainCheck_Status="Invalid"                                                                       # Return Invalid Domain Trigger
else
  Global_DomainCheck_Whois=$(whois "$Global_DomainCheck_Domain" | grep 'No match for')                      # Generate Domain Registered Check
  if [ "$Global_DomainCheck_Whois" = "" ]; then                                                             # Check If Domain Is Registered
    Global_DomainCheck_Status="Registered"                                                                  # Return Registered Trigger
  else
    Global_DomainCheck_Status="Unregistered"                                                                # Return Not Registered Trigger
  fi
fi

}

#Global_DomainCheck                                                                                         # Call Function (Testing Purposes Only)