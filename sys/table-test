#!/bin/bash

Table_Title="Server Info"                                                               # Declare Table Title
declare -a Table_Header_Labels=('Hostname' 'IP');                                       # echo ${Table_Header_Labels[0]}

## Table Field Generation Area ##

# Field 1 - Hostname
Hostname="vps.domain.com"                                                               # Output for Field 1

# Field 2 - IP
IP="192.168.1.100"                                                                      # Output for Field 2

## End Table Field Generation Area ##

# Generate Size Variables
for i in ${Table_Header_Labels[@]} 
do
	Output=${!i}                                                                        # Convert Array to Variable
	(( ${i}_Size = ${#Output} >= ${#i} ? ${#Output} : ${#i} ))                          # Size Variable
done

## Temporary Work Space ##

#echo ${Table_Header_Labels[*]} | sed 's/ /_Size}s | %-${/g; s/[^ ]* */%-${&/g;'
# s/ /_Size}s | %-${/g; s/[^ ]* */%-${&/g; s/$/_Size}s/
# s/[^ ]* */%-${&/g; - Prefix
# s/$/_Size}s/; - Suffix
# s/ /_Size}s | %-${/g; - Middle

## END Temporary Work Space ##

# Need Loops Made
Table_Header_Format=" %-${Hostname_Size}s | %-${IP_Size}s\\n"                           # Calculates Total Header Length
Table_Row_Format=" %-${Hostname_Size}s | %-${IP_Size}s\\n"                              # Calculates Total Row Length
Table_Width=$(( 2 + ( 3 * ( Table_Columns - 1 ) ) + Hostname_Size + IP_Size));          # Calculate Table Total Width

echo " %-${Hostname_Size}s | %-${IP_Size}s\\n"

# Automated Variables
Table_Columns=${#Table_Header_Labels[@]}                                                # Table Number of Columns
Table_Title_Size=${#Table_Title}                                                        # Detect Title Size

# Format Table Title
if [ "$Table_Title_Size" -gt "$Table_Width" ]; then
  Table_Width=$Table_Title_Size
fi
Table_Title_Divider=$(( ( Table_Width - ( Table_Title_Size + 2 ) ) / 2 ));
Table_Title_Divider_2=$Table_Title_Divider;
if [ $(( Table_Width % 2 )) -ne $(( Table_Title_Size % 2 )) ]; then
    ((Table_Title_Divider_2++));
fi

# Print the Table
printf "\\n$Color_Blue%*s$Color_Reset" $Table_Title_Divider | tr ' ' '=';               # Print Title Left Glyfs
printf " %s " "$Table_Title"                                                            # Print Title
printf "$Color_Blue%*s$Color_Reset\\n" $Table_Title_Divider_2 | tr ' ' '='              # Print Title Right Glyfs
printf "$Table_Header_Format" "${Table_Header_Labels[0]}" "${Table_Header_Labels[1]}"   # Print Headers
printf "%*s\\n" "$Table_Width" | tr ' ' '=';                                            # Print Header Divider
printf "$Table_Row_Format" "$Hostname" "$IP"                                            # Print Row